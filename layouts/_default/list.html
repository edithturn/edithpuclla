{{- define "main" }}
<article class="post-single">
  {{- if .Title }}
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    {{- if .Description }}
    <div class="post-description">
      {{ .Description | markdownify }}
    </div>
    {{- end }}
  </header>
  {{- end }}

  {{- if .Content }}
  <div class="post-content">
    {{ .Content }}
  </div>
  {{- end }}

  {{- $pages := .RegularPages }}
  {{- if gt (len $pages) 0 }}
  <div class="post-list">
    {{- range $pages }}
    <article class="post-entry">
      <header class="entry-header">
        <h2>
          <a href="{{ .Permalink }}">{{ .Title }}</a>
          {{- if .Draft }}
          <span class="draft-badge">Draft</span>
          {{- end }}
        </h2>
      </header>
      {{- if .Summary }}
      <div class="entry-content">
        <p>{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}</p>
      </div>
      {{- end }}
      {{- if .Date }}
      <footer class="entry-footer">
        <time>{{ .Date.Format "January 2, 2006" }}</time>
      </footer>
      {{- end }}
    </article>
    {{- end }}
  </div>
  {{- end }}
</article>
{{- end }}

